<p-input-label *ngIf="label" [label]="label" [id]="id" [tooltipText]="tooltip" role="label" [attr.for]="id"></p-input-label>

<div class="p-select"
     [class]="['p-select--' + size]"
     [class.p-select--max-h]="isMaxHeight"
     role="group"
     [attr.aria-labelledby]="id">
  <nz-select
    class="select"
    [nzPlaceHolder]="placeholder"
    [nzServerSearch]="isServerSearch"
    [nzMode]="mode"
    [nzAllowClear]="isClearable"
    [nzClearIcon]="clear"
    [nzBackdrop]="isAttachBackdrop"
    [nzDropdownClassName]="dropdownClasses"
    [nzShowSearch]="isSearchable"
    [nzNotFoundContent]="notFoundText"
    [nzDisabled]="isDisabled"
    [formControl]="formControl"
    [attr.aria-disabled]="isDisabled"
    [attr.aria-invalid]="!formControl.valid"
    [attr.aria-describedby]="(!formControl.valid) ? id + '-error' : null"
    [attr.aria-required]="isRequired()"
    (nzOnSearch)="onSearch($event)"
    (nzOpenChange)="onOpenChange($event)">
    <nz-option
      class="select__option"
      *ngFor="let o of options"
      [nzValue]="o.value !== undefined ? o.value : o.label"
      [nzLabel]="(o.label ? o.label : o.value)"
      role="option"
      [attr.aria-selected]="formControl.value === o.value ? 'true' : null"
    ></nz-option>
  </nz-select>
</div>

<ng-template #clear>
  <p-icon *ngIf="formControl.value !== undefined" class="p-select__clear" size="16" icon="cross" role="button" tabindex="0" aria-label="Очистить выбор"></p-icon>
</ng-template>
