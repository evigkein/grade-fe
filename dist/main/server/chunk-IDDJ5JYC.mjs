import './polyfills.server.mjs';
import{b as T}from"./chunk-4QSUW5QU.mjs";import{R as m,T as w,U as o,Uc as v,V as c,d as g,da as f,pa as y,pd as b,sd as I,ud as A,xd as x}from"./chunk-3YBNO2ZJ.mjs";import{a as s}from"./chunk-4QKC3NAK.mjs";function C(){return c(h)}var a=class a{constructor(){this.modalsQueue$=new g;this.modalsQueue=[];this.maxModalsAmount=3;this.baseZIndex=203}isLastModal(e){return this.modalsQueue[this.modalsQueue.length-1].id===e}getLastModal(){return this.modalsQueue[this.modalsQueue.length-1]}openModal(e){let t=this.modalsQueue.length,r;return t<this.maxModalsAmount?(e.id=e.id||T("modal_"),e.isOverlayHidden=e.isOverlayHidden??!1,e.zIndex||(this.modalsQueue.length?e.zIndex=(this.getLastModal()?.zIndex??0)+1||this.baseZIndex:e.zIndex=this.baseZIndex),this.modalsQueue.push(e),this.modalsQueue$.next(this.modalsQueue),e.id):null}closeModal(e,t=!1,r=!1){let l=this.modalsQueue.findIndex(d=>d.id===e),n=this.modalsQueue[l];l>=0&&(n.closeAction&&!t?n.closeAction(r):(this.modalsQueue.splice(l,1),this.modalsQueue$.next(this.modalsQueue)))}closeAllModals(){[...this.modalsQueue].forEach(e=>this.closeModal(e.id))}getModal(e){return this.modalsQueue.find(t=>t.id===e)}closeAllModalsWithoutActions(){this.modalsQueue=[],this.modalsQueue$.next(this.modalsQueue)}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"});var h=a;function S(i){return!i.length||!Array.isArray(i)?null:i.reduce((e,t)=>e+(Number(t)||0),0)/i.length}function M(i,e){return s(s({},i),e)}var Q=new w("An abstraction over global window object",{factory:()=>{let{defaultView:i}=c(f);if(!i)throw new Error("Window is not available");return i}});var u=class u{constructor(e,t,r,l,n,d,p){this.windowRef=e;this.documentRef=t;this.platformId=r;this.route=l;this.router=n;this.urlSerializer=d;this.sanitizer=p;this.isBrowser=v(this.platformId);this.isServer=!0;this.isSafari=this.isBrowserSafari()}get window(){return this.isBrowser&&window?window:null}get document(){return this.isBrowser&&window?this.documentRef:null}get navigator(){return this.isBrowser?navigator:null}copyText(e){try{this.navigator.clipboard.writeText(e)}catch{console.error("Copied Failed.")}}getBrowserScreenMode(){if(this.isBrowser){let e=window?.getComputedStyle(document.body).backgroundColor?.match(/\d+/g),t=S(e);if(t<100&&t!==null)return"dark"}return"light"}changeViewportMeta(){let e=document.querySelector('meta[name="viewport"]'),t=document.createElement("meta"),r="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, viewport-fit=cover";t.setAttribute("name","viewport"),t.setAttribute("content",r),e.replaceWith(t)}isBrowserSafari(){if(!this.isBrowser)return!1;let e=navigator?.userAgent?.toLowerCase();return!e?.includes("chrome")&&e?.includes("safari")}changeQueryParams(e,t=!1,r=!0,l=!1){if(!this.window)return;console.log(e);let n;if(l){let P=this.route.snapshot.queryParams.Q_PARAMS;n=r?M(P,e):e,n={params:JSON.stringify(n)}}else n=r?s(s({},this.route.snapshot.queryParams),e):e,n=j(n,"stringify");let d=this.router.createUrlTree([],{relativeTo:this.route,queryParams:n}),p=this.urlSerializer.serialize(d);t?this.window.history.replaceState({},"",p):this.window.history.pushState({},"",p)}getQueryParams(e=!1){if(e){let t=this.route.snapshot.queryParams.params;return t?JSON.parse(t):{}}else{let t=this.route.snapshot.queryParams;return j(t,"parse")}}getConnectionSpeed(){return window.navigator.connection?.downlink||0}};u.\u0275fac=function(t){return new(t||u)(o(Q),o(f),o(y),o(A),o(x),o(I),o(b))},u.\u0275prov=m({token:u,factory:u.\u0275fac,providedIn:"root"});var O=u;function j(i,e){let t={};for(let r in i)if(i.hasOwnProperty(r)){if(e==="stringify")t[r]=JSON.stringify(i[r]);else if(e==="parse")try{t[r]=JSON.parse(i[r])}catch{t[r]=i[r]}}return t}export{C as a,h as b,O as c};
