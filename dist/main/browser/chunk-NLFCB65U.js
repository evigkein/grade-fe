import{a as Gr}from"./chunk-DTZ7WWAU.js";import{a as Wr,b as jr}from"./chunk-GMXLYYOE.js";import{a as Ur}from"./chunk-WAHKTOBK.js";import{a as nt}from"./chunk-OVH3P2P6.js";import{a as rt}from"./chunk-UM6JIIIW.js";import"./chunk-TJYII6NH.js";import{a as zr}from"./chunk-UAH4FZGC.js";import{c as Vr,e as Yr}from"./chunk-AYPZRFPW.js";import"./chunk-I32RZREO.js";import{a as Rr,b as Nr}from"./chunk-6MJUPQMQ.js";import"./chunk-BYXBJQAS.js";import{b as Lr}from"./chunk-DUNFNXGG.js";import"./chunk-FUYAXSS4.js";import{a as Fr,c as kr}from"./chunk-ISQTMDKI.js";import{c as $r}from"./chunk-GI5CMFIB.js";import{a as tt}from"./chunk-DZ7FKK7R.js";import{a as Pr,b as Mr,d as Br}from"./chunk-AUEA3HHE.js";import{c as _r,ca as et,f as Ie,g as Cr,i as De,j as wr,n as xr,o as Je,p as Sr,q as Er,s as Ir,u as Dr}from"./chunk-SSN7TVEG.js";import{a as Qr}from"./chunk-E6X6OZOB.js";import"./chunk-4VO2AQ3W.js";import{b as Ze,c as Ae}from"./chunk-GSX75BF4.js";import{Ab as Y,Ad as Tr,Ba as Se,Bb as ce,C as Jt,Cb as dr,E as Ye,F as _e,I as Zt,Ia as ir,J as er,L as tr,La as ae,Lb as wt,Ma as He,Na as ar,O as We,Pa as Ee,R as rr,Ra as se,Tb as hr,U as Fe,Ub as vr,Va as ur,Xb as xt,Z as nr,_ as je,aa as Qe,ac as Le,ba as ie,bb as V,c as Be,cb as T,db as O,de as J,e as io,ea as Ce,eb as W,f as ao,fa as we,ga as or,gc as $e,h as oe,hc as gr,ib as sr,jb as cr,jd as Xe,kb as fr,la as Ge,lb as qe,lc as br,m as qt,nb as X,nc as yr,ob as Ct,pb as lr,qa as xe,qb as mr,ud as St,v as Kt,vb as ke,x as Xt,xb as pr,xd as Ar,yc as Ke,yd as Or,za as F}from"./chunk-CJOHU5ML.js";var Zr=io((Jr,Dt)=>{"use strict";(function(b){if(typeof Jr=="object"&&typeof Dt<"u")Dt.exports=b();else if(typeof define=="function"&&define.amd)define([],b);else{var d;typeof window<"u"?d=window:typeof global<"u"?d=global:typeof self<"u"?d=self:d=this,d.localforage=b()}})(function(){var b,d,l;return(function p(g,S,E){function L($,q){if(!S[$]){if(!g[$]){var h=typeof Be=="function"&&Be;if(!q&&h)return h($,!0);if(D)return D($,!0);var y=new Error("Cannot find module '"+$+"'");throw y.code="MODULE_NOT_FOUND",y}var R=S[$]={exports:{}};g[$][0].call(R.exports,function(M){var K=g[$][1][M];return L(K||M)},R,R.exports,p,g,S,E)}return S[$].exports}for(var D=typeof Be=="function"&&Be,U=0;U<E.length;U++)L(E[U]);return L})({1:[function(p,g,S){(function(E){"use strict";var L=E.MutationObserver||E.WebKitMutationObserver,D;if(L){var U=0,$=new L(M),q=E.document.createTextNode("");$.observe(q,{characterData:!0}),D=function(){q.data=U=++U%2}}else if(!E.setImmediate&&typeof E.MessageChannel<"u"){var h=new E.MessageChannel;h.port1.onmessage=M,D=function(){h.port2.postMessage(0)}}else"document"in E&&"onreadystatechange"in E.document.createElement("script")?D=function(){var B=E.document.createElement("script");B.onreadystatechange=function(){M(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},E.document.documentElement.appendChild(B)}:D=function(){setTimeout(M,0)};var y,R=[];function M(){y=!0;for(var B,Z,k=R.length;k;){for(Z=R,R=[],B=-1;++B<k;)Z[B]();k=R.length}y=!1}g.exports=K;function K(B){R.push(B)===1&&!y&&D()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(p,g,S){"use strict";var E=p(1);function L(){}var D={},U=["REJECTED"],$=["FULFILLED"],q=["PENDING"];g.exports=h;function h(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=q,this.queue=[],this.outcome=void 0,m!==L&&K(this,m)}h.prototype.catch=function(m){return this.then(null,m)},h.prototype.then=function(m,w){if(typeof m!="function"&&this.state===$||typeof w!="function"&&this.state===U)return this;var C=new this.constructor(L);if(this.state!==q){var A=this.state===$?m:w;R(C,A,this.outcome)}else this.queue.push(new y(C,m,w));return C};function y(m,w,C){this.promise=m,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(m){D.resolve(this.promise,m)},y.prototype.otherCallFulfilled=function(m){R(this.promise,this.onFulfilled,m)},y.prototype.callRejected=function(m){D.reject(this.promise,m)},y.prototype.otherCallRejected=function(m){R(this.promise,this.onRejected,m)};function R(m,w,C){E(function(){var A;try{A=w(C)}catch(z){return D.reject(m,z)}A===m?D.reject(m,new TypeError("Cannot resolve promise with itself")):D.resolve(m,A)})}D.resolve=function(m,w){var C=B(M,w);if(C.status==="error")return D.reject(m,C.value);var A=C.value;if(A)K(m,A);else{m.state=$,m.outcome=w;for(var z=-1,j=m.queue.length;++z<j;)m.queue[z].callFulfilled(w)}return m},D.reject=function(m,w){m.state=U,m.outcome=w;for(var C=-1,A=m.queue.length;++C<A;)m.queue[C].callRejected(w);return m};function M(m){var w=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof w=="function")return function(){w.apply(m,arguments)}}function K(m,w){var C=!1;function A(G){C||(C=!0,D.reject(m,G))}function z(G){C||(C=!0,D.resolve(m,G))}function j(){w(z,A)}var Q=B(j);Q.status==="error"&&A(Q.value)}function B(m,w){var C={};try{C.value=m(w),C.status="success"}catch(A){C.status="error",C.value=A}return C}h.resolve=Z;function Z(m){return m instanceof this?m:D.resolve(new this(L),m)}h.reject=k;function k(m){var w=new this(L);return D.reject(w,m)}h.all=ft;function ft(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=m.length,A=!1;if(!C)return this.resolve([]);for(var z=new Array(C),j=0,Q=-1,G=new this(L);++Q<C;)ee(m[Q],Q);return G;function ee(Re,ze){w.resolve(Re).then(lt,function(be){A||(A=!0,D.reject(G,be))});function lt(be){z[ze]=be,++j===C&&!A&&(A=!0,D.resolve(G,z))}}}h.race=ue;function ue(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=m.length,A=!1;if(!C)return this.resolve([]);for(var z=-1,j=new this(L);++z<C;)Q(m[z]);return j;function Q(G){w.resolve(G).then(function(ee){A||(A=!0,D.resolve(j,ee))},function(ee){A||(A=!0,D.reject(j,ee))})}}},{1:1}],3:[function(p,g,S){(function(E){"use strict";typeof E.Promise!="function"&&(E.Promise=p(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(p,g,S){"use strict";var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function L(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function D(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var U=D();function $(){try{if(!U||!U.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function q(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(n){if(n.name!=="TypeError")throw n;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(r.type)}}typeof Promise>"u"&&p(3);var h=Promise;function y(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function R(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function M(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function K(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var B="local-forage-detect-blob-support",Z=void 0,k={},ft=Object.prototype.toString,ue="readonly",m="readwrite";function w(e){for(var r=e.length,t=new ArrayBuffer(r),o=new Uint8Array(t),i=0;i<r;i++)o[i]=e.charCodeAt(i);return t}function C(e){return new h(function(r){var t=e.transaction(B,m),o=q([""]);t.objectStore(B).put(o,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),r(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);r(n||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function A(e){return typeof Z=="boolean"?h.resolve(Z):C(e).then(function(r){return Z=r,Z})}function z(e){var r=k[e.name],t={};t.promise=new h(function(o,i){t.resolve=o,t.reject=i}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function j(e){var r=k[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function Q(e,r){var t=k[e.name],o=t.deferredOperations.pop();if(o)return o.reject(r),o.promise}function G(e,r){return new h(function(t,o){if(k[e.name]=k[e.name]||Ot(),e.db)if(r)z(e),e.db.close();else return t(e.db);var i=[e.name];r&&i.push(e.version);var n=U.open.apply(U,i);r&&(n.onupgradeneeded=function(a){var u=n.result;try{u.createObjectStore(e.storeName),a.oldVersion<=1&&u.createObjectStore(B)}catch(s){if(s.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+a.oldVersion+" to version "+a.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw s}}),n.onerror=function(a){a.preventDefault(),o(n.error)},n.onsuccess=function(){var a=n.result;a.onversionchange=function(u){u.target.close()},t(a),j(e)}})}function ee(e){return G(e,!1)}function Re(e){return G(e,!0)}function ze(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var n=e.db.version+1;n>e.version&&(e.version=n)}return!0}return!1}function lt(e){return new h(function(r,t){var o=new FileReader;o.onerror=t,o.onloadend=function(i){var n=btoa(i.target.result||"");r({__local_forage_encoded_blob:!0,data:n,type:e.type})},o.readAsBinaryString(e)})}function be(e){var r=w(atob(e.data));return q([r],{type:e.type})}function At(e){return e&&e.__local_forage_encoded_blob}function an(e){var r=this,t=r._initReady().then(function(){var o=k[r._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return R(t,e,e),t}function un(e){z(e);for(var r=k[e.name],t=r.forages,o=0;o<t.length;o++){var i=t[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,ee(e).then(function(n){return e.db=n,ze(e)?Re(e):n}).then(function(n){e.db=r.db=n;for(var a=0;a<t.length;a++)t[a]._dbInfo.db=n}).catch(function(n){throw Q(e,n),n})}function te(e,r,t,o){o===void 0&&(o=1);try{var i=e.db.transaction(e.storeName,r);t(null,i)}catch(n){if(o>0&&(!e.db||n.name==="InvalidStateError"||n.name==="NotFoundError"))return h.resolve().then(function(){if(!e.db||n.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),Re(e)}).then(function(){return un(e).then(function(){te(e,r,t,o-1)})}).catch(t);t(n)}}function Ot(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function sn(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var i=k[t.name];i||(i=Ot(),k[t.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=an);var n=[];function a(){return h.resolve()}for(var u=0;u<i.forages.length;u++){var s=i.forages[u];s!==r&&n.push(s._initReady().catch(a))}var c=i.forages.slice(0);return h.all(n).then(function(){return t.db=i.db,ee(t)}).then(function(f){return t.db=f,ze(t,r._defaultConfig.version)?Re(t):f}).then(function(f){t.db=i.db=f,r._dbInfo=t;for(var v=0;v<c.length;v++){var _=c[v];_!==r&&(_._dbInfo.db=t.db,_._dbInfo.version=t.version)}})}function cn(e,r){var t=this;e=M(e);var o=new h(function(i,n){t.ready().then(function(){te(t._dbInfo,ue,function(a,u){if(a)return n(a);try{var s=u.objectStore(t._dbInfo.storeName),c=s.get(e);c.onsuccess=function(){var f=c.result;f===void 0&&(f=null),At(f)&&(f=be(f)),i(f)},c.onerror=function(){n(c.error)}}catch(f){n(f)}})}).catch(n)});return y(o,r),o}function fn(e,r){var t=this,o=new h(function(i,n){t.ready().then(function(){te(t._dbInfo,ue,function(a,u){if(a)return n(a);try{var s=u.objectStore(t._dbInfo.storeName),c=s.openCursor(),f=1;c.onsuccess=function(){var v=c.result;if(v){var _=v.value;At(_)&&(_=be(_));var x=e(_,v.key,f++);x!==void 0?i(x):v.continue()}else i()},c.onerror=function(){n(c.error)}}catch(v){n(v)}})}).catch(n)});return y(o,r),o}function ln(e,r,t){var o=this;e=M(e);var i=new h(function(n,a){var u;o.ready().then(function(){return u=o._dbInfo,ft.call(r)==="[object Blob]"?A(u.db).then(function(s){return s?r:lt(r)}):r}).then(function(s){te(o._dbInfo,m,function(c,f){if(c)return a(c);try{var v=f.objectStore(o._dbInfo.storeName);s===null&&(s=void 0);var _=v.put(s,e);f.oncomplete=function(){s===void 0&&(s=null),n(s)},f.onabort=f.onerror=function(){var x=_.error?_.error:_.transaction.error;a(x)}}catch(x){a(x)}})}).catch(a)});return y(i,t),i}function mn(e,r){var t=this;e=M(e);var o=new h(function(i,n){t.ready().then(function(){te(t._dbInfo,m,function(a,u){if(a)return n(a);try{var s=u.objectStore(t._dbInfo.storeName),c=s.delete(e);u.oncomplete=function(){i()},u.onerror=function(){n(c.error)},u.onabort=function(){var f=c.error?c.error:c.transaction.error;n(f)}}catch(f){n(f)}})}).catch(n)});return y(o,r),o}function pn(e){var r=this,t=new h(function(o,i){r.ready().then(function(){te(r._dbInfo,m,function(n,a){if(n)return i(n);try{var u=a.objectStore(r._dbInfo.storeName),s=u.clear();a.oncomplete=function(){o()},a.onabort=a.onerror=function(){var c=s.error?s.error:s.transaction.error;i(c)}}catch(c){i(c)}})}).catch(i)});return y(t,e),t}function dn(e){var r=this,t=new h(function(o,i){r.ready().then(function(){te(r._dbInfo,ue,function(n,a){if(n)return i(n);try{var u=a.objectStore(r._dbInfo.storeName),s=u.count();s.onsuccess=function(){o(s.result)},s.onerror=function(){i(s.error)}}catch(c){i(c)}})}).catch(i)});return y(t,e),t}function hn(e,r){var t=this,o=new h(function(i,n){if(e<0){i(null);return}t.ready().then(function(){te(t._dbInfo,ue,function(a,u){if(a)return n(a);try{var s=u.objectStore(t._dbInfo.storeName),c=!1,f=s.openKeyCursor();f.onsuccess=function(){var v=f.result;if(!v){i(null);return}e===0||c?i(v.key):(c=!0,v.advance(e))},f.onerror=function(){n(f.error)}}catch(v){n(v)}})}).catch(n)});return y(o,r),o}function vn(e){var r=this,t=new h(function(o,i){r.ready().then(function(){te(r._dbInfo,ue,function(n,a){if(n)return i(n);try{var u=a.objectStore(r._dbInfo.storeName),s=u.openKeyCursor(),c=[];s.onsuccess=function(){var f=s.result;if(!f){o(c);return}c.push(f.key),f.continue()},s.onerror=function(){i(s.error)}}catch(f){i(f)}})}).catch(i)});return y(t,e),t}function gn(e,r){r=K.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;if(!e.name)i=h.reject("Invalid arguments");else{var n=e.name===t.name&&o._dbInfo.db,a=n?h.resolve(o._dbInfo.db):ee(e).then(function(u){var s=k[e.name],c=s.forages;s.db=u;for(var f=0;f<c.length;f++)c[f]._dbInfo.db=u;return u});e.storeName?i=a.then(function(u){if(u.objectStoreNames.contains(e.storeName)){var s=u.version+1;z(e);var c=k[e.name],f=c.forages;u.close();for(var v=0;v<f.length;v++){var _=f[v];_._dbInfo.db=null,_._dbInfo.version=s}var x=new h(function(I,N){var P=U.open(e.name,s);P.onerror=function(H){var Me=P.result;Me.close(),N(H)},P.onupgradeneeded=function(){var H=P.result;H.deleteObjectStore(e.storeName)},P.onsuccess=function(){var H=P.result;H.close(),I(H)}});return x.then(function(I){c.db=I;for(var N=0;N<f.length;N++){var P=f[N];P._dbInfo.db=I,j(P._dbInfo)}}).catch(function(I){throw(Q(e,I)||h.resolve()).catch(function(){}),I})}}):i=a.then(function(u){z(e);var s=k[e.name],c=s.forages;u.close();for(var f=0;f<c.length;f++){var v=c[f];v._dbInfo.db=null}var _=new h(function(x,I){var N=U.deleteDatabase(e.name);N.onerror=function(){var P=N.result;P&&P.close(),I(N.error)},N.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},N.onsuccess=function(){var P=N.result;P&&P.close(),x(P)}});return _.then(function(x){s.db=x;for(var I=0;I<c.length;I++){var N=c[I];j(N._dbInfo)}}).catch(function(x){throw(Q(e,x)||h.resolve()).catch(function(){}),x})})}return y(i,r),i}var bn={_driver:"asyncStorage",_initStorage:sn,_support:$(),iterate:fn,getItem:cn,setItem:ln,removeItem:mn,clear:pn,length:dn,key:hn,keys:vn,dropInstance:gn};function yn(){return typeof openDatabase=="function"}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_n="~~local_forage_type~",Tt=/^~~local_forage_type~([^~]+)~/,Ue="__lfsc__:",mt=Ue.length,pt="arbf",dt="blob",Pt="si08",Rt="ui08",Nt="uic8",Mt="si16",Bt="si32",Ft="ur16",kt="ui32",Lt="fl32",$t="fl64",zt=mt+pt.length,Ut=Object.prototype.toString;function Vt(e){var r=e.length*.75,t=e.length,o,i=0,n,a,u,s;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var c=new ArrayBuffer(r),f=new Uint8Array(c);for(o=0;o<t;o+=4)n=re.indexOf(e[o]),a=re.indexOf(e[o+1]),u=re.indexOf(e[o+2]),s=re.indexOf(e[o+3]),f[i++]=n<<2|a>>4,f[i++]=(a&15)<<4|u>>2,f[i++]=(u&3)<<6|s&63;return c}function ht(e){var r=new Uint8Array(e),t="",o;for(o=0;o<r.length;o+=3)t+=re[r[o]>>2],t+=re[(r[o]&3)<<4|r[o+1]>>4],t+=re[(r[o+1]&15)<<2|r[o+2]>>6],t+=re[r[o+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Cn(e,r){var t="";if(e&&(t=Ut.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Ut.call(e.buffer)==="[object ArrayBuffer]")){var o,i=Ue;e instanceof ArrayBuffer?(o=e,i+=pt):(o=e.buffer,t==="[object Int8Array]"?i+=Pt:t==="[object Uint8Array]"?i+=Rt:t==="[object Uint8ClampedArray]"?i+=Nt:t==="[object Int16Array]"?i+=Mt:t==="[object Uint16Array]"?i+=Ft:t==="[object Int32Array]"?i+=Bt:t==="[object Uint32Array]"?i+=kt:t==="[object Float32Array]"?i+=Lt:t==="[object Float64Array]"?i+=$t:r(new Error("Failed to get type for BinaryArray"))),r(i+ht(o))}else if(t==="[object Blob]"){var n=new FileReader;n.onload=function(){var a=_n+e.type+"~"+ht(this.result);r(Ue+dt+a)},n.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),r(null,a)}}function wn(e){if(e.substring(0,mt)!==Ue)return JSON.parse(e);var r=e.substring(zt),t=e.substring(mt,zt),o;if(t===dt&&Tt.test(r)){var i=r.match(Tt);o=i[1],r=r.substring(i[0].length)}var n=Vt(r);switch(t){case pt:return n;case dt:return q([n],{type:o});case Pt:return new Int8Array(n);case Rt:return new Uint8Array(n);case Nt:return new Uint8ClampedArray(n);case Mt:return new Int16Array(n);case Ft:return new Uint16Array(n);case Bt:return new Int32Array(n);case kt:return new Uint32Array(n);case Lt:return new Float32Array(n);case $t:return new Float64Array(n);default:throw new Error("Unkown type: "+t)}}var vt={serialize:Cn,deserialize:wn,stringToBuffer:Vt,bufferToString:ht};function Yt(e,r,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function xn(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var i=new h(function(n,a){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(u){return a(u)}t.db.transaction(function(u){Yt(u,t,function(){r._dbInfo=t,n()},function(s,c){a(c)})},a)});return t.serializer=vt,i}function ne(e,r,t,o,i,n){e.executeSql(t,o,i,function(a,u){u.code===u.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(s,c){c.rows.length?n(s,u):Yt(s,r,function(){s.executeSql(t,o,i,n)},n)},n):n(a,u)},n)}function Sn(e,r){var t=this;e=M(e);var o=new h(function(i,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(u){ne(u,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[e],function(s,c){var f=c.rows.length?c.rows.item(0).value:null;f&&(f=a.serializer.deserialize(f)),i(f)},function(s,c){n(c)})})}).catch(n)});return y(o,r),o}function En(e,r){var t=this,o=new h(function(i,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(u){ne(u,a,"SELECT * FROM "+a.storeName,[],function(s,c){for(var f=c.rows,v=f.length,_=0;_<v;_++){var x=f.item(_),I=x.value;if(I&&(I=a.serializer.deserialize(I)),I=e(I,x.key,_+1),I!==void 0){i(I);return}}i()},function(s,c){n(c)})})}).catch(n)});return y(o,r),o}function Wt(e,r,t,o){var i=this;e=M(e);var n=new h(function(a,u){i.ready().then(function(){r===void 0&&(r=null);var s=r,c=i._dbInfo;c.serializer.serialize(r,function(f,v){v?u(v):c.db.transaction(function(_){ne(_,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,f],function(){a(s)},function(x,I){u(I)})},function(_){if(_.code===_.QUOTA_ERR){if(o>0){a(Wt.apply(i,[e,s,t,o-1]));return}u(_)}})})}).catch(u)});return y(n,t),n}function In(e,r,t){return Wt.apply(this,[e,r,t,1])}function Dn(e,r){var t=this;e=M(e);var o=new h(function(i,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(u){ne(u,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[e],function(){i()},function(s,c){n(c)})})}).catch(n)});return y(o,r),o}function An(e){var r=this,t=new h(function(o,i){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(a){ne(a,n,"DELETE FROM "+n.storeName,[],function(){o()},function(u,s){i(s)})})}).catch(i)});return y(t,e),t}function On(e){var r=this,t=new h(function(o,i){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(a){ne(a,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(u,s){var c=s.rows.item(0).c;o(c)},function(u,s){i(s)})})}).catch(i)});return y(t,e),t}function Tn(e,r){var t=this,o=new h(function(i,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(u){ne(u,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[e+1],function(s,c){var f=c.rows.length?c.rows.item(0).key:null;i(f)},function(s,c){n(c)})})}).catch(n)});return y(o,r),o}function Pn(e){var r=this,t=new h(function(o,i){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(a){ne(a,n,"SELECT key FROM "+n.storeName,[],function(u,s){for(var c=[],f=0;f<s.rows.length;f++)c.push(s.rows.item(f).key);o(c)},function(u,s){i(s)})})}).catch(i)});return y(t,e),t}function Rn(e){return new h(function(r,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,n){for(var a=[],u=0;u<n.rows.length;u++)a.push(n.rows.item(u).name);r({db:e,storeNames:a})},function(i,n){t(n)})},function(o){t(o)})})}function Nn(e,r){r=K.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;return e.name?i=new h(function(n){var a;e.name===t.name?a=o._dbInfo.db:a=openDatabase(e.name,"","",0),e.storeName?n({db:a,storeNames:[e.storeName]}):n(Rn(a))}).then(function(n){return new h(function(a,u){n.db.transaction(function(s){function c(x){return new h(function(I,N){s.executeSql("DROP TABLE IF EXISTS "+x,[],function(){I()},function(P,H){N(H)})})}for(var f=[],v=0,_=n.storeNames.length;v<_;v++)f.push(c(n.storeNames[v]));h.all(f).then(function(){a()}).catch(function(x){u(x)})},function(s){u(s)})})}):i=h.reject("Invalid arguments"),y(i,r),i}var Mn={_driver:"webSQLStorage",_initStorage:xn,_support:yn(),iterate:En,getItem:Sn,setItem:In,removeItem:Dn,clear:An,length:On,key:Tn,keys:Pn,dropInstance:Nn};function Bn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function jt(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function Fn(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function kn(){return!Fn()||localStorage.length>0}function Ln(e){var r=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=jt(e,r._defaultConfig),kn()?(r._dbInfo=t,t.serializer=vt,h.resolve()):h.reject()}function $n(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);n.indexOf(o)===0&&localStorage.removeItem(n)}});return y(t,e),t}function zn(e,r){var t=this;e=M(e);var o=t.ready().then(function(){var i=t._dbInfo,n=localStorage.getItem(i.keyPrefix+e);return n&&(n=i.serializer.deserialize(n)),n});return y(o,r),o}function Un(e,r){var t=this,o=t.ready().then(function(){for(var i=t._dbInfo,n=i.keyPrefix,a=n.length,u=localStorage.length,s=1,c=0;c<u;c++){var f=localStorage.key(c);if(f.indexOf(n)===0){var v=localStorage.getItem(f);if(v&&(v=i.serializer.deserialize(v)),v=e(v,f.substring(a),s++),v!==void 0)return v}}});return y(o,r),o}function Vn(e,r){var t=this,o=t.ready().then(function(){var i=t._dbInfo,n;try{n=localStorage.key(e)}catch{n=null}return n&&(n=n.substring(i.keyPrefix.length)),n});return y(o,r),o}function Yn(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo,i=localStorage.length,n=[],a=0;a<i;a++){var u=localStorage.key(a);u.indexOf(o.keyPrefix)===0&&n.push(u.substring(o.keyPrefix.length))}return n});return y(t,e),t}function Wn(e){var r=this,t=r.keys().then(function(o){return o.length});return y(t,e),t}function jn(e,r){var t=this;e=M(e);var o=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return y(o,r),o}function Qn(e,r,t){var o=this;e=M(e);var i=o.ready().then(function(){r===void 0&&(r=null);var n=r;return new h(function(a,u){var s=o._dbInfo;s.serializer.serialize(r,function(c,f){if(f)u(f);else try{localStorage.setItem(s.keyPrefix+e,c),a(n)}catch(v){(v.name==="QuotaExceededError"||v.name==="NS_ERROR_DOM_QUOTA_REACHED")&&u(v),u(v)}})})});return y(i,t),i}function Gn(e,r){if(r=K.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,i;return e.name?i=new h(function(n){e.storeName?n(jt(e,o._defaultConfig)):n(e.name+"/")}).then(function(n){for(var a=localStorage.length-1;a>=0;a--){var u=localStorage.key(a);u.indexOf(n)===0&&localStorage.removeItem(u)}}):i=h.reject("Invalid arguments"),y(i,r),i}var Hn={_driver:"localStorageWrapper",_initStorage:Ln,_support:Bn(),iterate:Un,getItem:zn,setItem:Qn,removeItem:jn,clear:$n,length:Wn,key:Vn,keys:Yn,dropInstance:Gn},qn=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},Kn=function(r,t){for(var o=r.length,i=0;i<o;){if(qn(r[i],t))return!0;i++}return!1},Qt=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},Ne={},Gt={},ye={INDEXEDDB:bn,WEBSQL:Mn,LOCALSTORAGE:Hn},Xn=[ye.INDEXEDDB._driver,ye.WEBSQL._driver,ye.LOCALSTORAGE._driver],Ve=["dropInstance"],gt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ve),Jn={description:"",driver:Xn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Zn(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function bt(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(Qt(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var eo=(function(){function e(r){L(this,e);for(var t in ye)if(ye.hasOwnProperty(t)){var o=ye[t],i=o._driver;this[t]=i,Ne[i]||this.defineDriver(o)}this._defaultConfig=bt({},Jn),this._config=bt({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":E(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,i){var n=new h(function(a,u){try{var s=t._driver,c=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){u(c);return}for(var f=gt.concat("_initStorage"),v=0,_=f.length;v<_;v++){var x=f[v],I=!Kn(Ve,x);if((I||t[x])&&typeof t[x]!="function"){u(c);return}}var N=function(){for(var Me=function(no){return function(){var oo=new Error("Method "+no+" is not implemented by the current driver"),Ht=h.reject(oo);return y(Ht,arguments[arguments.length-1]),Ht}},yt=0,ro=Ve.length;yt<ro;yt++){var _t=Ve[yt];t[_t]||(t[_t]=Me(_t))}};N();var P=function(Me){Ne[s]&&console.info("Redefining LocalForage driver: "+s),Ne[s]=t,Gt[s]=Me,a()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(P,u):P(!!t._support):P(!0)}catch(H){u(H)}});return R(n,o,i),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,i){var n=Ne[t]?h.resolve(Ne[t]):h.reject(new Error("Driver not found."));return R(n,o,i),n},e.prototype.getSerializer=function(t){var o=h.resolve(vt);return R(o,t),o},e.prototype.ready=function(t){var o=this,i=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return R(i,t,t),i},e.prototype.setDriver=function(t,o,i){var n=this;Qt(t)||(t=[t]);var a=this._getSupportedDrivers(t);function u(){n._config.driver=n.driver()}function s(v){return n._extend(v),u(),n._ready=n._initStorage(n._config),n._ready}function c(v){return function(){var _=0;function x(){for(;_<v.length;){var I=v[_];return _++,n._dbInfo=null,n._ready=null,n.getDriver(I).then(s).catch(x)}u();var N=new Error("No available storage method found.");return n._driverSet=h.reject(N),n._driverSet}return x()}}var f=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=f.then(function(){var v=a[0];return n._dbInfo=null,n._ready=null,n.getDriver(v).then(function(_){n._driver=_._driver,u(),n._wrapLibraryMethodsWithReady(),n._initDriver=c(a)})}).catch(function(){u();var v=new Error("No available storage method found.");return n._driverSet=h.reject(v),n._driverSet}),R(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(t){return!!Gt[t]},e.prototype._extend=function(t){bt(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],i=0,n=t.length;i<n;i++){var a=t[i];this.supports(a)&&o.push(a)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=gt.length;t<o;t++)Zn(this,gt[t])},e.prototype.createInstance=function(t){return new e(t)},e})(),to=new eo;g.exports=to},{3:3}]},{},[4])(4)})});var uo=["*"];function so(b,d){b&1&&fr(0)}function co(b,d){if(b&1&&(sr(0),se(1,so,1,0,"ng-container",7),cr()),b&2){Ct();let l=ke(8);F(),V("ngTemplateOutlet",l)}}function fo(b,d){if(b&1&&(T(0,"div",8),Y(1),O()),b&2){let l=Ct();F(),ce(l.label)}}function lo(b,d){b&1&&mr(0)}function mo(b,d){b&1&&(or(),T(0,"svg",9)(1,"title"),Y(2,"checkbox"),O(),T(3,"desc"),Y(4,"Created with Sketch."),O(),T(5,"g")(6,"title"),Y(7,"Layer 1"),O(),W(8,"line",10)(9,"line",11),O()())}var fe=class fe extends et{constructor(){super(...arguments);this.action=new Se;this.isCentered=!1;this.isFocused=Ge(!1)}ngOnInit(){super.ngOnInit()}onAction(){let l=this.formControl.value??!1;this.formControl.patchValue(!l),this.action.emit(this.formControl.value)}};fe.\u0275fac=(()=>{let l;return function(g){return(l||(l=xe(fe)))(g||fe)}})(),fe.\u0275cmp=ae({type:fe,selectors:[["p-checkbox"]],inputs:{label:"label",type:"type",isCentered:[2,"isCentered","isCentered",$e]},outputs:{action:"action"},standalone:!1,features:[Ee],ngContentSelectors:uo,decls:9,vars:9,consts:[["content",""],["checkboxIcon",""],[1,"checkbox-container",3,"focus","blur","click"],[1,"checkbox-border"],["type","checkbox",1,"checkbox-input",3,"id"],[4,"ngIf"],["class","checkbox__label",4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"checkbox__label"],["viewBox","2 1 21 21","version","1.1","xmlns","http://www.w3.org/2000/svg"],["stroke","#000","id","svg_5","y2","18.090701","x2","10.781275","y1","11.028341","x1","3.218923","stroke-width","3"],["stroke","#000","transform","rotate(-0.4939 15.0624,11.7783) ","stroke-width","3","id","svg_6","y2","5.349067","x2","21.413574","y1","18.207585","x1","8.711307"]],template:function(p,g){if(p&1){let S=qe();lr(),T(0,"label",2),X("focus",function(){return Ce(S),we(g.isFocused.set(!0))})("blur",function(){return Ce(S),we(g.isFocused.set(!1))})("click",function(){return Ce(S),we(g.onAction())}),T(1,"div",3),W(2,"input",4),se(3,co,2,1,"ng-container",5),O(),se(4,fo,2,1,"div",6),O(),se(5,lo,1,0,"ng-template",null,0,xt)(7,mo,10,0,"ng-template",null,1,xt)}if(p&2){let S=ke(6);pr("checkbox-container--center",g.isCentered)("focused",g.isFocused()),ur("for",g.id),F(2),V("id",g.id),F(),V("ngIf",!!(g.formControl!=null&&g.formControl.value)),F(),V("ngIf",g.label)("ngIfElse",S)}},styles:["[_nghost-%COMP%]{display:flex;width:100%}.checkbox-container[_ngcontent-%COMP%]{display:flex;cursor:pointer}.checkbox-container[_ngcontent-%COMP%]   .checkbox-input[_ngcontent-%COMP%]{position:absolute;opacity:0;height:100%;width:100%;left:0;top:0;margin:0;pointer-events:none}.checkbox-container[_ngcontent-%COMP%]   .checkbox-border[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;transition:border-color .3s ease;width:20px;height:20px;margin-right:10px;border:1px solid #cbcbcb;border-radius:4px}.checkbox-container[_ngcontent-%COMP%]   .checkbox-border[_ngcontent-%COMP%]:hover{border:1px solid #8e8e93}.checkbox-container[_ngcontent-%COMP%]   .checkbox-border.focused[_ngcontent-%COMP%]{border:1px solid #4a90e2}.checkbox-container[_ngcontent-%COMP%]   .checkbox-border[_ngcontent-%COMP%]   .checkbox-filling[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:1px;background:#009866}svg[_ngcontent-%COMP%]{position:relative;left:1px;top:1px;width:16px;height:14px}"],changeDetection:0});var ot=fe;var ho=b=>({rotate:b}),vo=b=>({left:b}),me=class me extends ot{constructor(){super(...arguments);this.labelPosition="right"}};me.\u0275fac=(()=>{let l;return function(g){return(l||(l=xe(me)))(g||me)}})(),me.\u0275cmp=ae({type:me,selectors:[["p-switch"]],inputs:{labelPosition:"labelPosition"},features:[Ee],decls:6,vars:10,consts:[[1,"switch"],["type","checkbox",1,"switch__input",3,"click","formControl"],[1,"slider","round",3,"ngClass"],[1,"switch__label",3,"ngClass"]],template:function(p,g){p&1&&(T(0,"label",0)(1,"input",1),X("click",function(){return g.onAction()}),O(),W(2,"span",2),T(3,"span",3),Y(4),hr(5,"translate"),O()()),p&2&&(F(),V("formControl",g.formControl),F(),V("ngClass",wt(6,ho,g.formControl.value)),F(),V("ngClass",wt(8,vo,g.labelPosition==="left")),F(),ce(vr(5,4,g.label)))},dependencies:[Ke,br,Dr,_r,De,Je,Or,Ar],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;width:auto;height:21.5424px}.switch__input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.switch__label[_ngcontent-%COMP%]{margin-left:8.8px;cursor:pointer;-webkit-user-select:none;user-select:none}.switch__label.left[_ngcontent-%COMP%]{order:-1;margin-left:0;margin-right:8.8px}.slider[_ngcontent-%COMP%]{position:relative;cursor:pointer;width:39.6px;height:21.5424px;background-color:#ccc;transition:.4s;border-radius:21.5424px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16.4736px;width:16.4736px;left:2.5344px;bottom:2.5344px;background-color:#fff;transition:.4s;border-radius:50%}.switch__input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:linear-gradient(93.89deg,#ff9d00,#ff5100)}.switch__input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(18.9728px)}.slider.rotate[_ngcontent-%COMP%]{transition:transform .4s}.slider.rotate[_ngcontent-%COMP%]:before{transform:translate(18.9728px) rotate(360deg)}'],changeDetection:0});var Oe=me;var pe=class pe{constructor(d,l,p){this.apiQuotes=d;this.route=l;this.router=p;this.pickRouteSubject=new qt(null);this.pickRoute$=this.pickRouteSubject.asObservable().pipe(_e(Boolean))}pickRoute(d,l){this.pickRouteSubject.next({from:d,to:l})}getRoute$(){let d=Kt(this.route.snapshot.paramMap.get("slug")).pipe(_e(Boolean),Xt(l=>{let[p,g]=l.split("_");return{from:p,to:g}}));return Ye(d,this.pickRoute$).pipe(_e(l=>!!l.from&&!!l.to),tr((l,p)=>l.from===p.from&&l.to===p.to),rr(({from:l,to:p})=>this.apiQuotes.quotesControllerRoute({from:l,to:p}).pipe(Fe(g=>{let S=`${g.route.locationFrom.slug}-${g.route.locationTo.slug}`;this.router.updatePathParams(S)}))),We(1))}};pe.\u0275fac=function(l){return new(l||pe)(Qe(nt),Qe(Xe),Qe(kr))},pe.\u0275prov=nr({token:pe,factory:pe.\u0275fac,providedIn:"root"});var it=pe;function Hr(){return ie(Ir)}function qr(b){return b.replace(/\D/g,"")}function Kr(b=0,d,l=new Date){let p=new Date(l);switch(d){case"d":p.setDate(p.getDate()+b);break;case"w":p.setDate(p.getDate()+b*7);break;case"m":p.setMonth(p.getMonth()+b);break;case"y":p.setFullYear(p.getFullYear()+b);break;case"min":p.setMinutes(p.getMinutes()+b);break;default:throw new Error(`Unsupported offset type: ${d}`)}return p}function Xr(b,d){if(!b)return d;let l=b.toLowerCase(),p=d.filter(S=>(S.label?S.label.toLowerCase():S.value.toLowerCase()).startsWith(l)),g=d.filter(S=>{let E=S.label?S.label.toLowerCase():S.value.toLowerCase();return!E.startsWith(l)&&E.includes(l)});return[...p,...g]}function yo(b,d){if(b&1&&(T(0,"nz-auto-option",4),Y(1),O()),b&2){let l=d.$implicit;V("nzValue",l.value),F(),dr(" ",l.label?l.label:l.value," ")}}var de=class de extends et{constructor(){super(...arguments);this.options=[];this.placeholder="";this.customLabelField=null;this.isSync=!1;this.hasPaddingBottom=!1;this.valueSelected=new Se;this.focusAction=new Se;this.blurAction=new Se;this._options=Ge([]);this.destroy$=Ae()}onSelect(l){let p=typeof l.nzValue=="string"?l.nzValue:void 0;p&&this.valueSelected.emit(p)}ngOnInit(){super.ngOnInit(),this.isSync?(this._options.set(zr(this.options)),this.formControl.valueChanges.pipe(Yr(),this.destroy$()).subscribe(l=>{this._options.set(Xr(l,this.options))})):this._options.set(this.options)}};de.\u0275fac=(()=>{let l;return function(g){return(l||(l=xe(de)))(g||de)}})(),de.\u0275cmp=ae({type:de,selectors:[["p-autocomplete"]],inputs:{options:"options",default:"default",placeholder:"placeholder",myClass:"myClass",label:"label",tooltipText:"tooltipText",customLabelField:"customLabelField",isSync:[2,"isSync","isSync",$e],hasPaddingBottom:[2,"hasPaddingBottom","hasPaddingBottom",$e]},outputs:{valueSelected:"valueSelected",focusAction:"focusAction",blurAction:"blurAction"},standalone:!1,features:[Ee],decls:4,vars:6,consts:[["list",""],[3,"label","formControl","nzAutocomplete","hasPaddingBottom","placeholder"],[3,"selectionChange"],["class","search-item",3,"nzValue",4,"ngFor","ngForOf"],[1,"search-item",3,"nzValue"]],template:function(p,g){if(p&1){let S=qe();W(0,"p-input",1),T(1,"nz-autocomplete",2,0),X("selectionChange",function(L){return Ce(S),we(g.onSelect(L))}),se(3,yo,2,2,"nz-auto-option",3),O()}if(p&2){let S=ke(2);V("label",g.label)("formControl",g.formControl)("nzAutocomplete",S)("hasPaddingBottom",g.hasPaddingBottom)("placeholder",g.placeholder),F(3),V("ngForOf",g.isSync&&g.formControl.value?g._options():g.options)}},dependencies:[yr,Br,Mr,De,Je,tt],styles:["[_nghost-%COMP%]{width:inherit;height:inherit;color:inherit;font-style:inherit}.p-autoc[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:12px;outline:none}.p-autoc--m[_ngcontent-%COMP%]{height:62px}.p-autoc__label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.p-autoc__label-text[_ngcontent-%COMP%]{margin-right:var(--m-content);-webkit-user-select:none;user-select:none}"]});var at=de;var en=ao(Zr());var he=J()?en.default.createInstance({name:"formStorage"}):null;function tn(b,d,l){return oe(this,null,function*(){if(!J()||!he)return;let p=l?Date.now()+l:void 0;yield he.setItem(b,{value:d,expiresAt:p})})}function rn(b){return oe(this,null,function*(){if(!J()||!he)return null;let d=yield he.getItem(b);return d?d.expiresAt&&Date.now()>d.expiresAt?(yield he.removeItem(b),null):d.value:null})}function nn(b){return oe(this,null,function*(){!J()||!he||(yield he.removeItem(b))})}var Te=class Te{constructor(d){this.container=d;this.saveStrategy="change";this.destroy$=Ae()}get key(){return`${this.formGroupStore}-form`}get group(){return this.container.control}onSubmit(){return oe(this,null,function*(){yield nn(this.key)})}ngOnInit(){return oe(this,null,function*(){if(!J())return;let d=yield rn(this.key);d&&(console.log(d),this.group?.patchValue(d,{emitEvent:!0})),this.saveStrategy==="unload"?this.setupUnloadStrategy():this.setupChangeStrategy()})}setupChangeStrategy(){this.group?.valueChanges.pipe(Zt(400),this.destroy$()).subscribe(d=>this.saveValue(d))}setupUnloadStrategy(){J()&&Ye(Jt(window,"beforeunload")).pipe(this.destroy$(),_e(()=>!!this.group?.dirty),er(1)).subscribe(()=>this.saveValue(this.group.value))}saveValue(d){return oe(this,null,function*(){let l=this.ttlMins?this.ttlMins*6e4:void 0;yield tn(this.key,d,l)})}};Te.\u0275fac=function(l){return new(l||Te)(ir(Cr,2))},Te.\u0275dir=ar({type:Te,selectors:[["","formGroupStore",""]],hostBindings:function(l,p){l&1&&X("submit",function(){return p.onSubmit()})},inputs:{formGroupStore:"formGroupStore",saveStrategy:"saveStrategy",ttlMins:[2,"ttlMins","ttlMins",gr]}});var ut=Te;var Pe=class Pe{constructor(){this.routeA=ie(Xe);this.fb=Hr();this.apiQuotes=ie(nt);this.router=Fr();this.notiry=Lr();this.apiTrips=ie(jr);this.apiOrders=ie(Wr);this.routeData=ie(it);this.route$=this.initRoute();this.route=Tr(this.route$);this.titleFrom=Le(()=>this.route()?.route.locationFrom?.names?.ru??"");this.titleTo=Le(()=>this.route()?.route.locationTo?.names?.ru??"");this.title=Le(()=>{let d=this.titleFrom(),l=this.titleTo();return d&&l?`${d} - ${l}`:""});this.tags=Le(()=>{let d=this.route();if(!d)return[];let l=Gr({mins:d.route.durationMinutes});return[{label:"\u0420\u0430\u0441\u0441\u0442\u043E\u044F\u043D\u0438\u0435: ",labelBold:`~${d.route.distanceKm}\u043A\u043C`,icon:"roadSign"},{label:"\u0412\u0440\u0435\u043C\u044F \u0432 \u043F\u0443\u0442\u0438: ",labelBold:`~${l}`,icon:"clocks"}]});this.form=this.initForm();this.destroy$=Ae();this.minDate=new Date;this.maxDate=Kr(5,"w")}ngOnInit(){Qr(0)}initRoute(){let d=this.routeA.snapshot.paramMap.get("slug"),[l,p]=d.split("_");return this.apiQuotes.quotesControllerRoute({from:l,to:p}).pipe(Fe(g=>{this.router.updatePathParams(`${g.route.locationFrom.slug}-${g.route.locationTo.slug}`)}),We(1))}submit(){if(Rr(this.form))return;let d=this.route(),l=$r()?.state?.tariff;(!l||!d)&&this.router.router.navigate(["taxi"]);let p=this.form.value,g={childCarSeatCount:p.needChildSeat?1:0,dateTime:new Date(p.dateTime).toISOString(),departureAddress:p.fromAddress,destinationAddress:p.toAddress,isPetsOnTrip:!1,price:+l.price,mobileNumber:`7${qr(p.phone)}`,tariff:l.tariff.name,passengerCount:+p.passengers,fullName:p.fullName,route:d.route};this.apiOrders.orderControllerCreateOrder({body:g}).pipe(Fe(()=>this.notiry.showSuccess("\u041C\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u043B\u0438 \u0432\u0430\u0448\u0443 \u0437\u0430\u044F\u0432\u043A\u0443!")),this.destroy$()).subscribe()}initForm(){return this.fb.group({fromAddress:["",[Ie.required]],dateTime:["",[Ie.required]],toAddress:["",[Ie.required]],passengers:[1],needChildSeat:[!1],hasPet:[!1],fullName:["",[Ie.required]],phone:["",[Ie.required]],comment:[""]})}goBack(){if(!J())return;let d=this.routeA.snapshot.paramMap.get("slug");this.router.router.navigate([`/taxi/${d}`])}};Pe.\u0275fac=function(l){return new(l||Pe)},Pe.\u0275cmp=ae({type:Pe,selectors:[["p-page-booking"]],standalone:!1,decls:34,vars:6,consts:[[1,"p-page-wrapper"],[1,"booking__head"],[1,"booking__title"],[1,"booking__go-back",3,"click"],["formGroupStore","booking_form","ttlMins","30",1,"form",3,"formGroup"],[1,"form__address"],[1,"form__from-controls"],["formControlName","fromAddress","placeholder","\u0443\u043B. \u0421\u0432\u0435\u0440\u0434\u043B\u043E\u0432\u0441\u043A\u0430\u044F 1","label","\u0410\u0434\u0440\u0435\u0441 \u043F\u043E\u0434\u0430\u0447\u0438"],["hasTime","","formControlName","dateTime","label","\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F \u043F\u043E\u0434\u0430\u0447\u0438",3,"hasYear","minDate","maxDate"],["hasPaddingBottom","","formControlName","toAddress","placeholder","\u0443\u043B. \u0421\u0432\u0435\u0440\u0434\u043B\u043E\u0432\u0441\u043A\u0430\u044F 1","label","\u0410\u0434\u0440\u0435\u0441 \u043D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F"],[1,"form__details"],["formControlName","needChildSeat","label","\u0414\u0435\u0442\u0441\u043A\u043E\u0435 \u043A\u0440\u0435\u0441\u043B\u043E"],["formControlName","hasPet","label","\u041F\u0435\u0440\u0435\u0432\u043E\u0437\u043A\u0430 \u0434\u043E\u043C\u0430\u0448\u043D\u0435\u0433\u043E \u0436\u0438\u0432\u043E\u0442\u043D\u043E\u0433\u043E"],[1,"form-passengers"],["label","\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u0430\u0441\u0441\u0430\u0436\u0438\u0440\u043E\u0432","formControlName","passengers"],[1,"form__name"],["formControlName","fullName","hasPaddingBottom","","placeholder","\u0424\u0430\u043C\u0438\u043B\u0438\u044F \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E","label","\u0424\u0418\u041E \u043F\u0430\u0441\u0441\u0430\u0436\u0438\u0440\u0430"],["formControlName","phone","prefixText","+7","type","tel","appRussianNumberMask","","hasPaddingBottom","","label","\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430","placeholder","(___) ___-__-__"],["formControlName","comment","isTextArea","","mode","noOutline","areaMinHeight","120","areaMaxHeight","150","placeholder","\u0422\u043E, \u0447\u0442\u043E \u043D\u0430\u043C \u0432\u0430\u0436\u043D\u043E \u0437\u043D\u0430\u0442\u044C, \u0447\u0442\u043E\u0431\u044B \u0432\u0430\u0448\u0430 \u043F\u043E\u0435\u0437\u0434\u043A\u0430 \u043F\u0440\u043E\u0448\u043B\u0430 \u043D\u0430\u0438\u0431\u043E\u043B\u0435\u0435 \u043A\u043E\u043C\u0444\u043E\u0440\u0442\u043D\u044B\u043C \u0434\u043B\u044F \u0432\u0430\u0441 \u043E\u0431\u0440\u0430\u0437\u043E\u043C","label","\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443"],["label","\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C \u0442\u0440\u0430\u043D\u0441\u0444\u0435\u0440",1,"form__submit",3,"action"]],template:function(l,p){l&1&&(T(0,"div",0)(1,"div",1)(2,"h3",2),Y(3,"\u0417\u0430\u043A\u0430\u0437 \u0442\u0440\u0430\u043D\u0441\u0444\u0435\u0440\u0430"),O(),T(4,"button",3),X("click",function(){return p.goBack()}),Y(5,"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043A \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430\u043C"),O()(),T(6,"form",4)(7,"div",5)(8,"div",5)(9,"span"),Y(10,"\u041E\u0442\u043A\u0443\u0434\u0430"),O(),T(11,"p"),Y(12),O()(),T(13,"div",6),W(14,"p-autocomplete",7)(15,"p-datepicker",8),O(),T(16,"div",5)(17,"span"),Y(18,"\u041A\u0443\u0434\u0430"),O(),T(19,"p"),Y(20),O()(),T(21,"div",6),W(22,"p-autocomplete",9),O()(),T(23,"div",10),W(24,"p-switch",11)(25,"p-switch",12),T(26,"div",13),W(27,"p-input",14),O()(),T(28,"div",15)(29,"div",6),W(30,"p-input",16)(31,"p-input",17),O(),W(32,"p-input",18),O(),T(33,"p-button",19),X("action",function(){return p.submit()}),O()()()),l&2&&(F(6),V("formGroup",p.form),F(6),ce(p.titleFrom()),F(3),V("hasYear",!1)("minDate",p.minDate)("maxDate",p.maxDate),F(5),ce(p.titleTo()))},dependencies:[xr,De,wr,Sr,Er,rt,Oe,tt,at,Nr,Ze,ut],styles:['.booking__title[_ngcontent-%COMP%]{font-weight:700;font-style:normal;font-size:36px;line-height:100%;color:#111}.form__address[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}.form__address[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#7c7c7c}.form__address[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:32px;line-height:.8}.form__from-controls[_ngcontent-%COMP%]{margin-top:12px;display:grid;grid-template-columns:65% 35%;gap:16px;width:100%}@media (max-width: 768px){.form__from-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column}}p-datepicker[_ngcontent-%COMP%]{margin-top:0}.form__details[_ngcontent-%COMP%]{padding-top:16px;margin-top:16px;border-top:1px solid #E8E8E8;display:flex;flex-direction:column}.form-passengers[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin-top:8px}.form-passengers[_ngcontent-%COMP%]   p-select[_ngcontent-%COMP%], .form-passengers[_ngcontent-%COMP%]   p-input[_ngcontent-%COMP%]{max-width:180px}.form__name[_ngcontent-%COMP%]{padding-top:16px;margin-top:16px;border-top:1px solid #E8E8E8}.booking__go-back[_ngcontent-%COMP%]{padding:8px 12px 8px 24px;width:max-content;background-color:#f8f8f8;font-size:14px;position:relative;display:inline-flex;align-items:center;gap:8px;border-radius:16px;margin-top:8px;cursor:pointer}.booking__go-back[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;top:50%;transform:translateY(-50%);width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-right:8px solid #999;border-radius:2px}.form__submit[_ngcontent-%COMP%]{margin-top:20px}'],changeDetection:0});var st=Pe;var wo=[{path:":slug",component:st}],ve=class ve{};ve.\u0275fac=function(l){return new(l||ve)},ve.\u0275mod=He({type:ve}),ve.\u0275inj=je({imports:[St.forChild(wo),St]});var ct=ve;var ge=class ge{};ge.\u0275fac=function(l){return new(l||ge)},ge.\u0275mod=He({type:ge}),ge.\u0275inj=je({imports:[Ke,ct,Vr,rt,Oe,Pr,Ur,Ze]});var on=ge;export{on as PageBookingModule};
