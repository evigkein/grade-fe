import{a as Z}from"./chunk-ZSTGDPVV.js";import{a as Ne,b as ze}from"./chunk-6MJUPQMQ.js";import{a as qe}from"./chunk-7OXIAWVD.js";import{a as U}from"./chunk-HKVSCSZA.js";import"./chunk-BYXBJQAS.js";import{b as Ge}from"./chunk-DUNFNXGG.js";import"./chunk-UYGCWU42.js";import"./chunk-FUYAXSS4.js";import{a as We}from"./chunk-CNF6XKAQ.js";import"./chunk-NEGII3TZ.js";import"./chunk-7PZ5VAJA.js";import{a as $e}from"./chunk-ISQTMDKI.js";import"./chunk-FASDMZNA.js";import{d as He}from"./chunk-GI5CMFIB.js";import{a as je}from"./chunk-DZ7FKK7R.js";import{a as Ae}from"./chunk-AUEA3HHE.js";import{b as Pe,f as D,i as Me,j as ke,p as Ee,q as Ie,s as Re}from"./chunk-SSN7TVEG.js";import{a as Le}from"./chunk-E6X6OZOB.js";import"./chunk-4VO2AQ3W.js";import{b as W,c as Be}from"./chunk-GSX75BF4.js";import{Ab as l,Ad as De,Ba as V,Bb as y,Cb as ve,Db as _e,Ib as Ce,Kb as he,La as g,M as se,Ma as j,O as pe,R as me,Ra as u,Tb as S,U as N,Ub as we,Vb as xe,Wa as ce,Wb as ye,Xa as ge,Xb as ee,Y as le,Z as ue,_ as B,ba as R,bb as s,be as q,cb as r,db as i,de as Ve,ea as v,eb as c,fa as _,gc as H,hc as te,ib as $,jb as G,kb as de,la as z,lb as F,m as re,nb as T,nc as b,ob as m,oc as L,tc as Se,ud as ne,vb as Q,vc as be,wb as fe,x as ae,xb as X,xc as Oe,xd as Fe,yc as d,yd as Te,za as a}from"./chunk-CJOHU5ML.js";function Ze(o,t){o&1&&de(0)}function Ye(o,t){if(o&1&&(r(0,"div",2),u(1,Ze,1,0,"ng-container",3),i()),o&2){let e=m();a(),s("ngTemplateOutlet",e.template)}}var O=class O{constructor(){this.columns=4;this.rows=3;this.gapSizeInPx=20;this.itemHeight=328;this.itemWidth=224;this.skeletonRows=2;this.trackBy=We}get amountOfColumns(){return this.columns.toString()}get amountOfRows(){return this.rows.toString()}get gapSize(){return`${this.gapSizeInPx}px`}get skeletonHeight(){return`${this.itemHeight}px`}get skeletonWidth(){return typeof this.itemWidth=="number"?`${this.itemWidth}px`:this.itemWidth}ngOnInit(){this.initSkeletons()}initSkeletons(){let t=this.columns*this.rows;this.skeletons=Array.from({length:t})}};O.\u0275fac=function(e){return new(e||O)},O.\u0275cmp=g({type:O,selectors:[["p-skeleton-grid"]],hostVars:10,hostBindings:function(e,n){e&2&&fe("--amount-of-columns",n.amountOfColumns)("--amount-of-rows",n.amountOfRows)("--gap-size",n.gapSize)("--skeleton-item-height",n.skeletonHeight)("--skeleton-item-width",n.skeletonWidth)},inputs:{type:"type",template:"template",columns:"columns",rows:"rows",gapSizeInPx:"gapSizeInPx",itemHeight:"itemHeight",itemWidth:"itemWidth",skeletonRows:"skeletonRows"},decls:2,vars:2,consts:[[1,"skeleton-grid"],["class","skeleton-grid__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"skeleton-grid__item"],[4,"ngTemplateOutlet"]],template:function(e,n){e&1&&(r(0,"div",0),u(1,Ye,2,1,"div",1),i()),e&2&&(a(),s("ngForOf",n.skeletons)("ngForTrackBy",n.trackBy))},dependencies:[d,b,Se],styles:["[_nghost-%COMP%]{display:block;width:100%}.skeleton-grid[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(var(--amount-of-columns),1fr);grid-template-rows:repeat(var(--amount-of-rows),1fr);gap:var(--gap-size);overflow:hidden}.skeleton-grid__item[_ngcontent-%COMP%]{width:var(--skeleton-item-width);height:var(--skeleton-item-height)}.skeleton-grid--auto[_ngcontent-%COMP%]   .skeleton-grid__item[_ngcontent-%COMP%]{width:100%;height:auto;aspect-ratio:3/4}.skeleton-grid__item[_ngcontent-%COMP%]{position:relative;background:linear-gradient(90deg,#eee 25%,#f5f5f5,#eee 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:12px}@keyframes _ngcontent-%COMP%_shimmer{to{background-position:-200% 0}}"],changeDetection:0});var P=O;var Ke=()=>[];function Qe(o,t){if(o&1){let e=F();$(0),r(1,"span",4),T("mouseenter",function(){let p=v(e).index,A=m();return _(A.onHover(p+1))})("mouseleave",function(){v(e);let p=m();return _(p.onLeave())})("click",function(){let p=v(e).index,A=m();return _(A.setRating(p+1))}),l(2,"\u2605"),i(),G()}if(o&2){let e=t.index,n=m();a(),X("filled",e<(n.hoveredStar||n.rating))}}function Xe(o,t){if(o&1&&(r(0,"div",5),l(1),i()),o&2){let e=m();a(),y(e.rating)}}function et(o,t){if(o&1&&(r(0,"div",6),l(1),S(2,"translate"),i()),o&2){let e=m();a(),_e(" (",e.reviewsCount," ",we(2,2,"reviews"),`)
`)}}var C=class C{constructor(){this.maxStars=5;this.rating=5;this.hasRating=!1;this.hasCount=!1;this.isControl=!1;this.reviewsCount=0;this.ratingChange=new V;this.hoveredStar=0;this.onChange=()=>{};this.onTouched=()=>{}}setRating(t){this.isControl&&(this.rating=t,this.ratingChange.emit(t),this.onChange(t),this.onTouched())}onHover(t){this.isControl&&(this.hoveredStar=t)}onLeave(){this.hoveredStar=0}writeValue(t){typeof t=="number"&&(this.rating=t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}};C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=g({type:C,selectors:[["p-stars-rating"]],inputs:{maxStars:"maxStars",rating:[2,"rating","rating",te],hasRating:[2,"hasRating","hasRating",H],hasCount:[2,"hasCount","hasCount",H],isControl:[2,"isControl","isControl",H],reviewsCount:[2,"reviewsCount","reviewsCount",te]},outputs:{ratingChange:"ratingChange"},features:[Ce([{provide:Pe,useExisting:le(()=>C),multi:!0}])],decls:4,vars:6,consts:[[1,"stars"],[4,"ngFor","ngForOf"],["class","rating",4,"ngIf"],["class","reviews",4,"ngIf"],[1,"star",3,"mouseenter","mouseleave","click"],[1,"rating"],[1,"reviews"]],template:function(e,n){e&1&&(r(0,"div",0),u(1,Qe,3,2,"ng-container",1),i(),u(2,Xe,2,1,"div",2)(3,et,3,4,"div",3)),e&2&&(X("interactive",n.isControl),a(),s("ngForOf",he(5,Ke).constructor(n.maxStars)),a(),s("ngIf",n.hasRating),a(),s("ngIf",n.hasCount))},dependencies:[d,b,L,Te,Fe],styles:["[_nghost-%COMP%]{display:flex;align-items:center;gap:4px;cursor:default}.stars[_ngcontent-%COMP%]{display:flex;gap:4px;font-size:var(--star-size, 24px);line-height:1;-webkit-user-select:none;user-select:none}.stars.interactive[_ngcontent-%COMP%]{cursor:pointer}.stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{color:#ccc;transition:color .2s}.stars[_ngcontent-%COMP%]   .star.filled[_ngcontent-%COMP%]{color:#ff9d00}.rating[_ngcontent-%COMP%]{font-weight:700}.reviews[_ngcontent-%COMP%]{margin-left:4px;text-transform:capitalize}"],changeDetection:0});var f=C;var k=class k{constructor(){this.AAAA2=new V}runOutput(){this.AAAA2.emit()}};k.\u0275fac=function(e){return new(e||k)},k.\u0275cmp=g({type:k,selectors:[["p-review-card"]],inputs:{review:"review"},outputs:{AAAA2:"AAAA2"},decls:14,vars:8,consts:[[1,"review-post"],[1,"review-post__header"],[1,"review-post__name"],[1,"review-post__stars"],[3,"rating"],[1,"review-post__text"],[1,"review-post__footer"],[1,"review-post__date"],[1,"review-post__route"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"p",2),l(3),i(),r(4,"div",3),c(5,"p-stars-rating",4),i()(),r(6,"p",5),l(7),i(),r(8,"div",6)(9,"span",7),l(10),S(11,"date"),i(),r(12,"span",8),l(13),i()()()),e&2&&(a(3),y(n.review.name),a(2),s("rating",n.review.rating),a(2),ve(" ",n.review.text," "),a(3),y(xe(11,5,n.review.date,"dd.MM.y")),a(3),y(n.review.route))},dependencies:[d,f,be],styles:[".review-post[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#f8f8f8;border-radius:12px;padding:16px 20px}.review-post__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.review-post__name[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#111;margin:0}.review-post__text[_ngcontent-%COMP%]{font-size:16px;line-height:140%;color:#111;margin:0 0 16px}.review-post__footer[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;color:#777;gap:16px}@media (max-width: 780px){.review-post[_ngcontent-%COMP%]{padding:12px 14px}.review-post__name[_ngcontent-%COMP%]{font-size:16px}.review-post__text[_ngcontent-%COMP%]{font-size:15px}.review-post__footer[_ngcontent-%COMP%]{align-items:flex-start;font-size:13px;gap:16px}}"],changeDetection:0});var E=k;var h=class h{constructor(){this.api=R(Z);this.reload$=new re(void 0);this.isLoading=z(!1);this.reviews$=this.reload$.pipe(N(()=>this.isLoading.set(!0)),me(()=>this.api.reviewsApiControllerFind({body:{}}).pipe(ae(t=>t.data),se(()=>this.isLoading.set(!1)))),pe(1));this.reviews=De(this.reviews$,{initialValue:[]})}reload(){this.reload$.next()}};h.\u0275fac=function(e){return new(e||h)},h.\u0275prov=ue({token:h,factory:h.\u0275fac,providedIn:"root"});var Y=h;function it(o,t){o&1&&c(0,"div",19)}function ot(o,t){if(o&1&&($(0),c(1,"p-skeleton-grid",18),u(2,it,1,0,"ng-template",null,1,ee),G()),o&2){let e=Q(3);a(),s("rows",5)("columns",1)("gapSizeInPx",16)("itemHeight",140)("itemWidth","100%")("template",e)}}function rt(o,t){if(o&1&&(r(0,"p-review-card",24),ge("fade-out"),ce("fade-in"),i()),o&2){let e=t.$implicit;s("review",e)}}function at(o,t){if(o&1){let e=F();r(0,"div",20)(1,"div",21),u(2,rt,1,1,"p-review-card",22),S(3,"slice"),i(),r(4,"p-button",23),T("action",function(){v(e);let p=m();return _(p.showMore(p.reviews$().length))}),i()()}if(o&2){let e=m();a(2),s("ngForOf",ye(3,1,e.reviews$(),0,e.visibleCount()))}}var I=class I{constructor(){this.router=$e();this.apiReviews=R(Z);this.notify=Ge();this.reviewsService=R(Y);this.destroy$=Be();this.PAGE_SIZE=5;this.visibleCount=z(this.PAGE_SIZE);this.reviews$=this.reviewsService.reviews;this.form=new Re().group({name:["",[D.required]],route:["",[D.required]],phone:[""],rating:[5],text:["",[D.required,D.minLength(10)]]})}ngOnInit(){Le(0)}showMore(t){let e=this.visibleCount()+this.PAGE_SIZE;this.visibleCount.set(Math.min(e,t))}goBack(){Ve()&&He(this.router.router,"/")}submit(){this.form.value.text.length<6&&this.notify.showError("\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0434\u043B\u0438\u043D\u0430 \u043E\u0442\u0437\u044B\u0432\u0430: 5 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),!Ne(this.form)&&this.apiReviews.reviewsApiControllerCreate({body:this.form.value}).pipe(N(()=>this.reviewsService.reload()),this.destroy$()).subscribe()}};I.\u0275fac=function(e){return new(e||I)},I.\u0275cmp=g({type:I,selectors:[["p-page-forum"]],standalone:!1,decls:22,vars:3,consts:[["reviewsContent",""],["reviewSkeleton",""],[1,"p-page-wrapper"],[1,"booking__head"],[1,"booking__title"],[4,"ngIf","ngIfElse"],[1,"reviews__h"],["icon","orangeReview","size","24"],[1,"review-form",3,"formGroup"],[1,"review-form__row"],["formControlName","name","label","\u0418\u043C\u044F \u0438 \u0444\u0430\u043C\u0438\u043B\u0438\u044F","placeholder","\u0424\u0418\u041E"],["formControlName","route","label","\u041D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0442\u0440\u0430\u043D\u0441\u0444\u0435\u0440\u0430","placeholder","\u0421\u043E\u0447\u0438 - \u041A\u0440\u0430\u0441\u043D\u043E\u0434\u0430\u0440"],["formControlName","phone","label","\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430","type","tel","prefixText","+7","appRussianNumberMask","","placeholder","(___) ___-__-__"],["formControlName","text","isTextArea","","mode","noOutline","areaMinHeight","120","areaMaxHeight","180","label","\u0417\u0434\u0435\u0441\u044C \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043D\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0441\u0432\u043E\u0439 \u043E\u0442\u0437\u044B\u0432:","placeholder","\u0412\u0430\u0448 \u043E\u0442\u0437\u044B\u0432"],["formControlName","rating","isControl",""],[1,"review-form__actions"],["label","\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043E\u0442\u0437\u044B\u0432","type","primary","size","l",3,"action"],["title","\u041E\u0441\u0442\u0430\u043B\u0438\u0441\u044C \u0432\u043E\u043F\u0440\u043E\u0441\u044B?"],[3,"rows","columns","gapSizeInPx","itemHeight","itemWidth","template"],[1,"skeleton-review"],[1,"faqs"],[1,"faqs__list"],[3,"review",4,"ngFor","ngForOf"],["label","\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0435\u0449\u0435",3,"action"],[3,"review"]],template:function(e,n){if(e&1){let p=F();r(0,"div",2)(1,"div",3)(2,"h3",4),l(3,"\u041E\u0442\u0437\u044B\u0432\u044B"),i()(),u(4,ot,4,6,"ng-container",5)(5,at,5,5,"ng-template",null,0,ee),r(7,"h4",6),c(8,"p-icon",7),l(9," \u041E\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0441\u0432\u043E\u0439 \u043E\u0442\u0437\u044B\u0432 "),i(),r(10,"div",8)(11,"div",9),c(12,"p-input",10)(13,"p-input",11)(14,"p-input",12),i(),r(15,"div",9),c(16,"p-input",13),i(),r(17,"div",9),c(18,"p-stars-rating",14),i(),r(19,"div",15)(20,"p-button",16),T("action",function(){return v(p),_(n.submit())}),i()()(),c(21,"p-call-us",17),i()}if(e&2){let p=Q(6);a(4),s("ngIf",n.reviewsService.isLoading())("ngIfElse",p),a(6),s("formGroup",n.form)}},dependencies:[b,L,U,E,W,Me,ke,Ee,Ie,je,ze,f,q,P,Oe],styles:['.booking__title[_ngcontent-%COMP%]{font-weight:700;font-style:normal;font-size:36px;line-height:100%;color:#111}.booking__go-back[_ngcontent-%COMP%]{padding:8px 12px 8px 24px;width:max-content;background-color:#f8f8f8;font-size:14px;position:relative;display:inline-flex;align-items:center;gap:8px;border-radius:16px;margin-top:8px;cursor:pointer}.booking__go-back[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;top:50%;transform:translateY(-50%);width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-right:8px solid #999;border-radius:2px}.faqs[_ngcontent-%COMP%]{margin-top:20px}.faqs[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{margin-top:12px}.faqs__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.review-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:20px 0}.review-form__row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.review-form__row[_ngcontent-%COMP%]   p-input[_ngcontent-%COMP%]{flex:1}@media (max-width: 960px){.review-form__row[_ngcontent-%COMP%]{flex-direction:column}}.review-form__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;margin-top:8px}.review-form__actions[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{width:200px;font-weight:700;font-size:16px}@media (max-width: 600px){.review-form__actions[_ngcontent-%COMP%]{justify-content:center}.review-form__actions[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{width:100%}}.reviews__h[_ngcontent-%COMP%]{margin-top:28px;display:flex;align-items:center;gap:8px;font-weight:700;font-size:28px;line-height:100%}p-skeleton-grid[_ngcontent-%COMP%]{margin-top:20px}'],data:{animation:[]},changeDetection:0});var J=I;var st=[{path:"",component:J}],w=class w{};w.\u0275fac=function(e){return new(e||w)},w.\u0275mod=j({type:w}),w.\u0275inj=B({imports:[ne.forChild(st),ne]});var K=w;var x=class x{};x.\u0275fac=function(e){return new(e||x)},x.\u0275mod=j({type:x}),x.\u0275inj=B({imports:[d,K,U,qe,E,W,Ae,f,q,P]});var Ue=x;export{Ue as ReviewsModule};
